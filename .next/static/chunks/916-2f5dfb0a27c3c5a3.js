"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{2091:function(n,t,e){e.r(t),e.d(t,{default:function(){return g},userInfoAtoms:function(){return v}});var o=e(9268),r=e(6312),a=e(8344),i=e(8466),c=e(9677),s=e(8741),u=e.n(s),d=e(884),l=e(7431),f=e(6006),p=function(){var n=(0,a._)((0,f.useState)(null),2),t=n[0],e=n[1],o=(0,d.b9)(v.userAtom);(0,d.Dv)(v.userAtom);var s=(0,l.oC)(v.userAtom);(0,c.a)(["getAuth"],{queryFn:(0,r._)(function(){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,u().get("/api/auth",{headers:{Authorization:"".concat(t)}})];case 1:return[2,n.sent()]}})}),onSuccess:function(n){o(n.data.user)},onError:function(n){s(),window.localStorage.removeItem("token")},enabled:!!t,retry:!1}),(0,f.useEffect)(function(){var n,t=null===(n=JSON.parse((null==window?void 0:window.localStorage.getItem("token"))||"null"))||void 0===n?void 0:n.access_token;t&&(e(t),u().defaults.headers.common.Authorization="".concat(t))},[])},h=function(){var n=(0,d.b9)(v.locationAtom),t=(0,a._)((0,f.useState)(void 0),2),e=t[0],o=t[1];(0,c.a)(["getLocation"],{queryFn:(0,r._)(function(){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,u().get("https://dapi.kakao.com/v2/local/geo/coord2address.json",{headers:{Authorization:"KakaoAK ".concat("c752b603e559baec62bada612899f613")},params:{y:null==e?void 0:e.coords.latitude,x:null==e?void 0:e.coords.longitude}})];case 1:return[2,n.sent()]}})}),onSuccess:function(t){n({si:t.data.documents[0].address.region_1depth_name,y:(null==e?void 0:e.coords.latitude)||0,x:(null==e?void 0:e.coords.longitude)||0})},onError:function(n){},enabled:void 0!==e}),(0,f.useEffect)(function(){navigator.geolocation.getCurrentPosition(o)},[])},m=e(8115),v={userAtom:(0,e(9541).rw)({id:0,email:null,userName:""}),locationAtom:(0,m.cn)({si:"서울",y:37.556428224476505,x:126.97150576481177})};function g(n){return p(),h(),(0,o.jsx)(o.Fragment,{children:n.children})}},5242:function(n,t,e){e.d(t,{H:function(){return p},Z:function(){return h}});var o=e(6312),r=e(7986),a=e(6429),i=e(8344),c=e(8466),s=e(9268),u=e(7898),d=e(9677),l=e(8115),f=e(884);e(6006);var p={storeAtom:(0,l.cn)({id:0,name:"",reviews:[]})};function h(n){var t=(0,i._)((0,f.KO)(p.storeAtom),2),e=t[0],l=t[1];return(0,d.a)(["getStore"],{queryFn:(0,o._)(function(){return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,u.M.getStore(n.storeId)];case 1:return[2,t.sent()]}})}),onSuccess:function(n){l((0,r._)({},n.data))},onError:function(n){},retry:!1,enabled:void 0!==n.storeId}),(0,d.a)(["getStoreThumbNail"],{queryFn:(0,o._)(function(){return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,u.M.getStoreThumbNail(n.storeId)];case 1:return[2,t.sent()]}})}),onSuccess:function(n){l((0,a._)((0,r._)({},e),{store_imgs:n.data}))},onError:function(n){},retry:!1,enabled:void 0!==n.storeId}),(0,s.jsx)(s.Fragment,{children:n.children})}},7439:function(n,t,e){var o=e(8344),r=e(2805),a=e(9268),i=e(9),c=e(3380),s=e(6008),u=e(6006),d=e(5732);function l(){var n=(0,r._)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  background-color: white;\n  position: absolute;\n  z-index: 9;\n  font-size: small;\n  padding: 5px 10px;\n  border-radius: 20px;\n  margin-left: 50%;\n  transform: translate(-50%, 10px);\n  gap: 5px;\n"]);return l=function(){return n},n}function f(){var n=(0,r._)(["\n  #info {\n    font-size: small;\n    border: solid #dcdcdc;\n    border: solid #46a6ff;\n    background-color: rgb(255, 255, 255);\n    padding: 5px 10px;\n    border-radius: 10px;\n    display: flex;\n    flex-direction: column;\n    transform: translate(40%, -130%);\n    box-shadow: 2px 2px 2px 2px #46a6ff33;\n  }\n  #info > span:nth-child(1) {\n    color: #46a6ff;\n  }\n"]);return f=function(){return n},n}t.Z=function(n){var t=n.loc,e=n.setLoc,r=n.curLoc,d=n.markerArr,l=(0,s.usePathname)(),f=(0,o._)((0,u.useState)({title:"",y:t.y,x:t.x}),2),m=f[0],v=f[1];(0,u.useEffect)(function(){g()},[t,d]);var g=function(){var n=document.getElementById("mapContainer"),e={center:new window.kakao.maps.LatLng(null==t?void 0:t.y,null==t?void 0:t.x),level:5},o=new window.kakao.maps.Map(n,e);new window.kakao.maps.Marker({map:o,position:new window.kakao.maps.LatLng(null==r?void 0:r.y,null==r?void 0:r.x),image:new window.kakao.maps.MarkerImage("/assets/curLoc.png",new window.kakao.maps.Size(20,20)),clickable:!0}),d.map(function(n){var t=new window.kakao.maps.Marker({map:o,position:new window.kakao.maps.LatLng(n.loc_y,n.loc_x),title:n.name,clickable:!0}),e='\n       <div><div id="info">\n       <span>'.concat(n.name,"</span>\n       <span>").concat(n.road_address_name,"</span>\n       </div></div>\n      "),r=new window.kakao.maps.CustomOverlay({content:e,map:o,position:t.getPosition()});r.setMap(null),window.kakao.maps.event.addListener(t,"click",function(){r.setMap(o)}),window.kakao.maps.event.addListener(o,"click",function(n){n.latLng!=t.getPosition()&&r.setMap(null)})}),window.kakao.maps.event.addListener(o,"center_changed",function(){var n=o.getCenter();v({title:"",y:n.getLat(),x:n.getLng()})})};return(0,a.jsxs)(a.Fragment,{children:["/map"==l&&(0,a.jsxs)(p,{onClick:function(){e&&e(m)},children:[(0,a.jsx)(c.G,{icon:i.XSV}),(0,a.jsx)("span",{children:"현 위치 검색"})]}),(0,a.jsx)(h,{id:"mapContainer",style:{width:"100%",height:"300px"}})]})};var p=d.ZP.div.withConfig({componentId:"sc-92ba770a-0"})(l(),function(n){return n.theme.color.blue}),h=d.ZP.div.withConfig({componentId:"sc-92ba770a-1"})(f())},8083:function(n,t,e){var o=e(8344),r=e(2805),a=e(9268),i=e(9),c=e(3380),s=e(9791),u=e(4835),d=e(5846),l=e.n(d),f=e(6008),p=e(6006),h=e(5732);function m(){var n=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  #icon {\n    font-size: large;\n    margin-bottom: 5px;\n  }\n  span {\n    font-size: xx-small;\n    margin-top: 5px;\n  }\n"]);return m=function(){return n},n}function v(){var n=(0,r._)(["\n  position: fixed;\n  bottom: 0;\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  gap: 20%;\n  align-items: center;\n  justify-content: center;\n  padding: 10px 0;\n  border-top: ",";\n  background-color: white;\n  z-index: 100;\n"]);return v=function(){return n},n}t.Z=function(){var n=(0,f.usePathname)(),t=(0,o._)((0,p.useState)(!0),2),e=t[0],r=t[1],d=(0,p.useRef)(0);(0,p.useEffect)(function(){return window.addEventListener("touchmove",l),function(){window.removeEventListener("touchmove",l)}},[]);var l=(0,p.useMemo)(function(){return(0,u.throttle)(function(n){var t=n.touches[0].screenY;d.current>t?r(!1):r(!0),d.current=t},250)},[d]);return(0,a.jsxs)(w,{className:(0,s.Z)(e?"visible":"invisible"),children:[(0,a.jsxs)(g,{href:"/home",children:[(0,a.jsx)(c.G,{icon:i.MV6,id:"icon",color:"/"==n?"#e2c26e":"#6f6f6f"}),(0,a.jsx)("span",{children:"홈"})]}),(0,a.jsxs)(g,{href:"/map",children:[(0,a.jsx)(c.G,{id:"icon",icon:i.FGq,color:"/storemap"==n?"#46A6FF":"#6f6f6f"}),(0,a.jsx)("span",{children:"빵 지도"})]}),(0,a.jsxs)(g,{href:"/wish",children:[(0,a.jsx)(c.G,{id:"icon",icon:i.m6i,color:"/wish"==n?"#f89573":"#6f6f6f"}),(0,a.jsx)("span",{children:"관심"})]}),(0,a.jsxs)(g,{href:"/feed",children:[(0,a.jsx)(c.G,{id:"icon",icon:i.FL8,color:"/feed"==n?"#46A6FF":"#6f6f6f"}),(0,a.jsx)("span",{children:"일지"})]})]})};var g=(0,h.ZP)(l()).withConfig({componentId:"sc-dd9f45bc-0"})(m()),w=h.ZP.div.withConfig({componentId:"sc-dd9f45bc-1"})(v(),function(n){return"solid thin"+n.theme.color.border_grey})},7898:function(n,t,e){e.d(t,{M:function(){return l}});var o,r,a,i=e(6312),c=e(7986),s=e(8466),u=e(8741),d=e.n(u),l={getNearbyStores:(o=(0,i._)(function(n){var t,e;return(0,s.Jh)(this,function(o){switch(o.label){case 0:t=n.curr_x,e=n.curr_y,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,d().get("".concat("http://localhost:1337","/api/nearby-stores?curr_x=").concat(t,"&curr_y=").concat(e))];case 2:return[2,{data:o.sent().data}];case 3:return o.sent(),[2,{attributes:void 0}];case 4:return[2]}})}),function(n){return o.apply(this,arguments)}),getStore:(r=(0,i._)(function(n){var t;return(0,s.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,d().get("".concat("http://localhost:1337","/api/stores/").concat(n))];case 1:return t=e.sent().data.data,[2,{data:(0,c._)({id:t.id},t.attributes)}];case 2:return e.sent(),[2,{attributes:void 0}];case 3:return[2]}})}),function(n){return r.apply(this,arguments)}),getStoreThumbNail:(a=(0,i._)(function(n){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d().get("".concat("http://localhost:1337","/api/store-imgs?filters[store][id][$eq]=").concat(n,"&pagination[limit]=3&populate=*"))];case 1:return[2,{data:t.sent().data.data.map(function(n){return n.attributes.img.data.attributes})}];case 2:return t.sent(),[2,{attributes:void 0}];case 3:return[2]}})}),function(n){return a.apply(this,arguments)})}}}]);