(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{5182:function(n,t,e){Promise.resolve().then(e.bind(e,6143))},2091:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return v},userInfoAtoms:function(){return g}});var r=e(9268),o=e(6312),i=e(8344),c=e(8466),a=e(9677),s=e(8741),u=e.n(s),d=e(884),l=e(7431),f=e(6006),h=function(){var n=(0,i._)((0,f.useState)(null),2),t=n[0],e=n[1],r=(0,d.b9)(g.userAtom);(0,d.Dv)(g.userAtom);var s=(0,l.oC)(g.userAtom);(0,a.a)(["getAuth"],{queryFn:(0,o._)(function(){return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,u().get("/api/auth",{headers:{Authorization:"".concat(t)}})];case 1:return[2,n.sent()]}})}),onSuccess:function(n){r(n.data.user)},onError:function(n){s(),window.localStorage.removeItem("token")},enabled:!!t,retry:!1}),(0,f.useEffect)(function(){var n,t=null===(n=JSON.parse((null==window?void 0:window.localStorage.getItem("token"))||"null"))||void 0===n?void 0:n.access_token;t&&(e(t),u().defaults.headers.common.Authorization="".concat(t))},[])},m=function(){var n=(0,d.b9)(g.locationAtom),t=(0,i._)((0,f.useState)(void 0),2),e=t[0],r=t[1];(0,a.a)(["getLocation"],{queryFn:(0,o._)(function(){return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,u().get("https://dapi.kakao.com/v2/local/geo/coord2address.json",{headers:{Authorization:"KakaoAK ".concat("c752b603e559baec62bada612899f613")},params:{y:null==e?void 0:e.coords.latitude,x:null==e?void 0:e.coords.longitude}})];case 1:return[2,n.sent()]}})}),onSuccess:function(t){n({si:t.data.documents[0].address.region_1depth_name,y:(null==e?void 0:e.coords.latitude)||0,x:(null==e?void 0:e.coords.longitude)||0})},onError:function(n){},enabled:void 0!==e}),(0,f.useEffect)(function(){navigator.geolocation.getCurrentPosition(r)},[])},p=e(8115),g={userAtom:(0,e(9541).rw)({id:0,email:null,userName:""}),locationAtom:(0,p.cn)({si:"서울",y:37.556428224476505,x:126.97150576481177})};function v(n){return h(),m(),(0,r.jsx)(r.Fragment,{children:n.children})}},6143:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return H}});var r,o=e(9268),i=e(8083),c=e(8344),a=e(2091),s=e(9),u=e(3380),d=e(9791),l=e(884),f=e(6006),h=e(8350),m=e(7986),p=e(6429),g=e(2805),v=e(5732);function x(){var n=(0,g._)(["\n  display: flex;\n  align-items: center;\n  padding: 35px 0;\n  border-bottom: ",";\n  border-right: ",";\n  font-size: 18px;\n  transition: 0.3s;\n  &:active {\n    filter: brightness(80%);\n  }\n"]);return x=function(){return n},n}function b(){var n=(0,g._)(["\n  display: grid;\n  width: 100%;\n  padding-bottom: 64px;\n  grid-template-columns: 50% 50%;\n  column-gap: 3px;\n  row-gap: 3px;\n  cursor: pointer;\n  border-top: ",";\n  & > div {\n    display: flex;\n    background-color: white;\n    overflow: hidden;\n    justify-content: center;\n    align-items: center;\n  }\n"]);return b=function(){return n},n}var _=["서울","부산","대구","인천","광주","대전","울산","세종","경기","강원","충북","충남","전북","전남","경북","경남","제주특별자치도"],w=function(n){var t=n.setChangeLocMode,e=(0,c._)((0,l.KO)(a.userInfoAtoms.locationAtom),2),r=e[0],i=e[1];return(0,o.jsx)(j,{children:_.map(function(n){return(0,o.jsx)(y,{onClick:function(){i((0,p._)((0,m._)({},r),{si:n})),t(!1)},children:n},n)})})},y=v.ZP.div.withConfig({componentId:"sc-da85f43a-0"})(x(),function(n){return"solid thin"+n.theme.color.border_grey},function(n){return"solid thin"+n.theme.color.border_grey}),j=v.ZP.div.withConfig({componentId:"sc-da85f43a-1"})(b(),function(n){return"solid thin"+n.theme.color.border_grey});function C(){var n=(0,g._)(["\n  font-size: large;\n  margin-left: 20px;\n  color: ",";\n"]);return C=function(){return n},n}function A(){var n=(0,g._)(["\n  width: 100%;\n  margin-right: 0;\n  margin-bottom: 100px;\n"]);return A=function(){return n},n}function k(){var n=(0,g._)(["\n  align-items: center;\n  width: 100%;\n  text-align: center;\n  flex: 1;\n  border-top: ",";\n  padding: 10px 0;\n  font-size: small;\n"]);return k=function(){return n},n}function I(){var n=(0,g._)(["\n  font-size: medium;\n  padding: 15px;\n  display: flex;\n  align-items: center;\n  border-bottom: solid thin #eeeeee;\n  width: 100%;\n  box-sizing: border-box;\n"]);return I=function(){return n},n}var Z=function(){var n=(0,l.Dv)(a.userInfoAtoms.locationAtom),t=(0,c._)((0,f.useState)([]),2),e=t[0];t[1];var r=(0,c._)((0,f.useState)(!1),2),i=r[0],s=r[1],u=function(){s(!0)};return(0,f.useEffect)(function(){},[n]),(0,o.jsxs)(P,{className:"col-container",children:[(0,o.jsx)(E,{children:"랭킹"}),e.map(function(n,t){return(t<10||i)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"row-container"}),9==t&&!i&&(0,o.jsx)(S,{onClick:u,children:"더보기"})]})})]})};v.ZP.span.withConfig({componentId:"sc-acf5607-0"})(C(),function(n){return n.color});var P=v.ZP.div.withConfig({componentId:"sc-acf5607-1"})(A()),S=v.ZP.button.withConfig({componentId:"sc-acf5607-2"})(k(),function(n){return"solid thin"+n.theme.color.border_grey}),E=v.ZP.div.withConfig({componentId:"sc-acf5607-3"})(I()),z=e(6057),N=e(6312),F=e(3435),J=e(8466),q=e(8741),G=e.n(q),K=(r=(0,N._)(function(n,t,e){var r,o;return(0,J.Jh)(this,function(i){switch(i.label){case 0:return[4,G().get("https://dapi.kakao.com/v2/local/search/keyword.json?query=".concat(e),{headers:{Authorization:"KakaoAK ".concat("c752b603e559baec62bada612899f613")},params:{page:n,category_group_code:"CE7, FD6"}}).then(function(e){r=e.data.documents.filter(function(n){return"CE7"==n.category_group_code||"간식"==n.category_name.split(" > ")[1]}),o=e.data.meta.is_end,1!=n&&(r=(0,F._)(t).concat((0,F._)(r)))})];case 1:return i.sent(),[2,new Promise(function(n,t){n({isEnd:o,resultArr:r})})]}})}),function(n,t,e){return r.apply(this,arguments)});function M(){var n=(0,g._)(["\n  margin: 20px 0;\n  justify-content: center;\n"]);return M=function(){return n},n}function D(){var n=(0,g._)(["\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  text-align: center;\n  flex: 1;\n  border-top: ",";\n  padding: 10px 0;\n  font-size: small;\n"]);return D=function(){return n},n}(0,N._)(function(n,t,e){var r,o;return(0,J.Jh)(this,function(i){switch(i.label){case 0:return[4,G().get("https://dapi.kakao.com/v2/local/search/keyword.json?query=디저트",{headers:{Authorization:"KakaoAK ".concat("c752b603e559baec62bada612899f613")},params:{y:e.y,x:e.x,category_group_code:"CE7, FD6",page:n,size:15,radius:500,sort:"distance"}}).then(function(e){r=e.data.documents.filter(function(n){return"CE7"==n.category_group_code&&"커피전문점"!=n.category_name.split(" > ")[2]||"간식"==n.category_name.split(" > ")[1]}),o=e.data.meta.is_end,1!=n&&(r=(0,F._)(t).concat((0,F._)(r)))})];case 1:return i.sent(),[2,new Promise(function(n,t){n({isEnd:o,resultArr:r})})]}})});var L=function(){var n=(0,c._)((0,f.useState)([]),2),t=n[0],e=n[1],r=(0,c._)((0,f.useState)(""),2),i=r[0],a=r[1],l=(0,c._)((0,f.useState)({isEnd:!0,currPage:1}),2),h=l[0],m=l[1],p=function(n){K(n,t,i).then(function(n){m(function(t){return{isEnd:n.isEnd,currPage:t.currPage+1}}),e(n.resultArr)})};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("form",{onSubmit:function(n){n.preventDefault(),e([]),p(1)},className:"flex items-center px-3 py-6 relative",children:[(0,o.jsx)("input",{type:"text",value:i,onChange:function(n){var t=n.target;a(t.value),""===t.value&&e([])},placeholder:"매장 검색",className:"general-input border w-full border-blue "}),(0,o.jsx)("button",{type:"submit",className:"absolute right-6 text-blue",disabled:""===i,children:(0,o.jsx)(u.G,{icon:s.wn1})})]}),(0,o.jsxs)("div",{className:(0,d.Z)("w-full mb-[100px] absolute bg-white",0===t.length?"hidden":"visible"),children:[(0,o.jsx)("div",{children:t.map(function(n){return(0,o.jsx)(z.Z,{store:n},n.id)})}),!h.isEnd&&(0,o.jsx)(O,{onClick:function(){return p(h.currPage)},children:"더 보기"})]})]})};v.ZP.form.withConfig({componentId:"sc-b712f393-0"})(M());var O=v.ZP.button.withConfig({componentId:"sc-b712f393-1"})(D(),function(n){return"solid thin"+n.theme.color.border_grey}),T=function(){var n=(0,l.Dv)(a.userInfoAtoms.locationAtom),t=(0,c._)((0,f.useState)(!1),2),e=t[0],r=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h.h4,{onClick:function(){return r(!0)},children:[(0,o.jsx)(u.G,{icon:s.FGq})," ",null==n?void 0:n.si]}),(0,o.jsxs)("div",{className:(0,d.Z)(e?"hidden":"visible"),children:[(0,o.jsx)(L,{}),(0,o.jsx)(Z,{})]}),(0,o.jsx)("div",{className:(0,d.Z)(e?"visible":"hidden"),children:(0,o.jsx)(w,{setChangeLocMode:r})})]})},H=function(){return(0,o.jsxs)("div",{children:[(0,o.jsx)(T,{}),(0,o.jsx)(i.Z,{})]})}},5242:function(n,t,e){"use strict";e.d(t,{H:function(){return h},Z:function(){return m}});var r=e(6312),o=e(7986),i=e(6429),c=e(8344),a=e(8466),s=e(9268),u=e(7898),d=e(9677),l=e(8115),f=e(884);e(6006);var h={storeAtom:(0,l.cn)({id:0,name:"",reviews:[]})};function m(n){var t=(0,c._)((0,f.KO)(h.storeAtom),2),e=t[0],l=t[1];return(0,d.a)(["getStore"],{queryFn:(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,u.M.getStore(n.storeId)];case 1:return[2,t.sent()]}})}),onSuccess:function(n){l((0,o._)({},n.data))},onError:function(n){},retry:!1,enabled:void 0!==n.storeId}),(0,d.a)(["getStoreThumbNail"],{queryFn:(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,u.M.getStoreThumbNail(n.storeId)];case 1:return[2,t.sent()]}})}),onSuccess:function(n){l((0,i._)((0,o._)({},e),{store_imgs:n.data}))},onError:function(n){},retry:!1,enabled:void 0!==n.storeId}),(0,s.jsx)(s.Fragment,{children:n.children})}},8350:function(n,t,e){"use strict";e.d(t,{ZX:function(){return u},h4:function(){return s}});var r=e(2805),o=e(5732);function i(){var n=(0,r._)(["\n    position: sticky;\n    display: flex;\n    align-items: center;\n    padding: 10px 20px;\n    top: 0px;\n    font-size: medium;\n    border-bottom: ",";\n    background-color: white;\n    color:#6f6f6f;\n    z-index:999;\n    gap: 10px;\n    box-sizing: border-box;\n    #visit{\n        flex: 0.1;\n    }\n"]);return i=function(){return n},n}function c(){var n=(0,r._)(["\n    flex: 0.7;\n"]);return c=function(){return n},n}function a(){var n=(0,r._)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-size: large;\n    margin-top: 10px;\n    color: #636363;\n        flex: 0.1;\n    #small{\n        font-size: xx-small;\n    }\n"]);return a=function(){return n},n}var s=o.ZP.header.withConfig({componentId:"sc-190f3b1a-0"})(i(),function(n){return"solid thin"+n.theme.color.border_grey}),u=o.ZP.span.withConfig({componentId:"sc-190f3b1a-1"})(c());o.ZP.div.withConfig({componentId:"sc-190f3b1a-2"})(a())},8083:function(n,t,e){"use strict";var r=e(8344),o=e(2805),i=e(9268),c=e(9),a=e(3380),s=e(9791),u=e(4835),d=e(5846),l=e.n(d),f=e(6008),h=e(6006),m=e(5732);function p(){var n=(0,o._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  #icon {\n    font-size: large;\n    margin-bottom: 5px;\n  }\n  span {\n    font-size: xx-small;\n    margin-top: 5px;\n  }\n"]);return p=function(){return n},n}function g(){var n=(0,o._)(["\n  position: fixed;\n  bottom: 0;\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  gap: 20%;\n  align-items: center;\n  justify-content: center;\n  padding: 10px 0;\n  border-top: ",";\n  background-color: white;\n  z-index: 100;\n"]);return g=function(){return n},n}t.Z=function(){var n=(0,f.usePathname)(),t=(0,r._)((0,h.useState)(!0),2),e=t[0],o=t[1],d=(0,h.useRef)(0);(0,h.useEffect)(function(){return window.addEventListener("touchmove",l),function(){window.removeEventListener("touchmove",l)}},[]);var l=(0,h.useMemo)(function(){return(0,u.throttle)(function(n){var t=n.touches[0].screenY;d.current>t?o(!1):o(!0),d.current=t},250)},[d]);return(0,i.jsxs)(x,{className:(0,s.Z)(e?"visible":"invisible"),children:[(0,i.jsxs)(v,{href:"/home",children:[(0,i.jsx)(a.G,{icon:c.MV6,id:"icon",color:"/"==n?"#e2c26e":"#6f6f6f"}),(0,i.jsx)("span",{children:"홈"})]}),(0,i.jsxs)(v,{href:"/map",children:[(0,i.jsx)(a.G,{id:"icon",icon:c.FGq,color:"/storemap"==n?"#46A6FF":"#6f6f6f"}),(0,i.jsx)("span",{children:"빵 지도"})]}),(0,i.jsxs)(v,{href:"/wish",children:[(0,i.jsx)(a.G,{id:"icon",icon:c.m6i,color:"/wish"==n?"#f89573":"#6f6f6f"}),(0,i.jsx)("span",{children:"관심"})]}),(0,i.jsxs)(v,{href:"/feed",children:[(0,i.jsx)(a.G,{id:"icon",icon:c.FL8,color:"/feed"==n?"#46A6FF":"#6f6f6f"}),(0,i.jsx)("span",{children:"일지"})]})]})};var v=(0,m.ZP)(l()).withConfig({componentId:"sc-dd9f45bc-0"})(p()),x=m.ZP.div.withConfig({componentId:"sc-dd9f45bc-1"})(g(),function(n){return"solid thin"+n.theme.color.border_grey})},6057:function(n,t,e){"use strict";var r=e(2805),o=e(9268),i=e(5242),c=e(884),a=e(6008);e(6006);var s=e(5732);function u(){var n=(0,r._)(["\n  width: 100vw;\n  max-width: 100vw;\n  display: flex;\n  align-items: center;\n  padding: 20px 0px;\n  height: 30px;\n  border-top: ",";\n"]);return u=function(){return n},n}function d(){var n=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: large;\n  color: #636363;\n"]);return d=function(){return n},n}function l(){var n=(0,r._)(["\n  gap: 20px;\n  margin-right: 20px;\n"]);return l=function(){return n},n}function f(){var n=(0,r._)(["\n  flex: 1;\n  margin-left: 20px;\n"]);return f=function(){return n},n}t.Z=function(n){var t=n.store,e=n.children,r=(0,a.useRouter)(),s=(0,c.b9)(i.H.storeAtom);return(0,o.jsxs)(h,{onClick:function(){s(t),r.push("/store/".concat(t.id))},children:[e,(0,o.jsx)(p,{children:t.name}),(0,o.jsx)(m,{className:"row-container"})]})};var h=s.ZP.div.withConfig({componentId:"sc-c2320ed8-0"})(u(),function(n){return"solid thin"+n.theme.color.border_grey});s.ZP.div.withConfig({componentId:"sc-c2320ed8-1"})(d());var m=s.ZP.div.withConfig({componentId:"sc-c2320ed8-2"})(l()),p=s.ZP.span.withConfig({componentId:"sc-c2320ed8-3"})(f())},7898:function(n,t,e){"use strict";e.d(t,{M:function(){return l}});var r,o,i,c=e(6312),a=e(7986),s=e(8466),u=e(8741),d=e.n(u),l={getNearbyStores:(r=(0,c._)(function(n){var t,e;return(0,s.Jh)(this,function(r){switch(r.label){case 0:t=n.curr_x,e=n.curr_y,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d().get("".concat("http://localhost:1337","/api/nearby-stores?curr_x=").concat(t,"&curr_y=").concat(e))];case 2:return[2,{data:r.sent().data}];case 3:return r.sent(),[2,{attributes:void 0}];case 4:return[2]}})}),function(n){return r.apply(this,arguments)}),getStore:(o=(0,c._)(function(n){var t;return(0,s.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,d().get("".concat("http://localhost:1337","/api/stores/").concat(n))];case 1:return t=e.sent().data.data,[2,{data:(0,a._)({id:t.id},t.attributes)}];case 2:return e.sent(),[2,{attributes:void 0}];case 3:return[2]}})}),function(n){return o.apply(this,arguments)}),getStoreThumbNail:(i=(0,c._)(function(n){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d().get("".concat("http://localhost:1337","/api/store-imgs?filters[store][id][$eq]=").concat(n,"&pagination[limit]=3&populate=*"))];case 1:return[2,{data:t.sent().data.data.map(function(n){return n.attributes.img.data.attributes})}];case 2:return t.sent(),[2,{attributes:void 0}];case 3:return[2]}})}),function(n){return i.apply(this,arguments)})}}},function(n){n.O(0,[957,180,731,246,253,769,744],function(){return n(n.s=5182)}),_N_E=n.O()}]);