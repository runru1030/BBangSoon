(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{2281:function(n,e,t){Promise.resolve().then(t.bind(t,8176))},2091:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return v},userInfoAtoms:function(){return x}});var o=t(9268),r=t(6312),i=t(8344),c=t(8466),s=t(9677),a=t(8741),u=t.n(a),d=t(884),l=t(7431),f=t(6006),m=function(){var n=(0,i._)((0,f.useState)(null),2),e=n[0],t=n[1],o=(0,d.b9)(x.userAtom);(0,d.Dv)(x.userAtom);var a=(0,l.oC)(x.userAtom);(0,s.a)(["getAuth"],{queryFn:(0,r._)(function(){return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,u().get("/api/auth",{headers:{Authorization:"".concat(e)}})];case 1:return[2,n.sent()]}})}),onSuccess:function(n){o(n.data.user)},onError:function(n){a(),window.localStorage.removeItem("token")},enabled:!!e,retry:!1}),(0,f.useEffect)(function(){var n,e=null===(n=JSON.parse((null==window?void 0:window.localStorage.getItem("token"))||"null"))||void 0===n?void 0:n.access_token;e&&(t(e),u().defaults.headers.common.Authorization="".concat(e))},[])},h=function(){var n=(0,d.b9)(x.locationAtom),e=(0,i._)((0,f.useState)(void 0),2),t=e[0],o=e[1];(0,s.a)(["getLocation"],{queryFn:(0,r._)(function(){return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,u().get("https://dapi.kakao.com/v2/local/geo/coord2address.json",{headers:{Authorization:"KakaoAK ".concat("c752b603e559baec62bada612899f613")},params:{y:null==t?void 0:t.coords.latitude,x:null==t?void 0:t.coords.longitude}})];case 1:return[2,n.sent()]}})}),onSuccess:function(e){n({si:e.data.documents[0].address.region_1depth_name,y:(null==t?void 0:t.coords.latitude)||0,x:(null==t?void 0:t.coords.longitude)||0})},onError:function(n){},enabled:void 0!==t}),(0,f.useEffect)(function(){navigator.geolocation.getCurrentPosition(o)},[])},p=t(8115),x={userAtom:(0,t(9541).rw)({id:0,email:null,userName:""}),locationAtom:(0,p.cn)({si:"서울",y:37.556428224476505,x:126.97150576481177})};function v(n){return m(),h(),(0,o.jsx)(o.Fragment,{children:n.children})}},8176:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return G}});var o=t(8344),r=t(2805),i=t(9268),c=t(2091),s=t(8741),a=t.n(s),u=t(884),d=t(6008),l=t(6006),f=t(5732),m=t(8083),h=t(8350),p=t(9),x=t(3380),v=t(7986),g=t(6429);function b(){var n=(0,r._)(["\n  margin-top: 200px;\n  background-color: white;\n  padding: 30px 50px;\n  align-items: center;\n  border-radius: 20px;\n  border: solid thin ",";\n"]);return b=function(){return n},n}function w(){var n=(0,r._)(["\n  position: absolute;\n  z-index: 99;\n  background-color: #2b2b2b71;\n  width: 100%;\n  height: 100vh;\n"]);return w=function(){return n},n}function j(){var n=(0,r._)(['\n  margin-top: 30px;\n  align-items: center;\n  input[type="text"] {\n    width: 100%;\n    border: solid thin\n      ',';\n    border-radius: 5px;\n    margin-bottom: 30px;\n    padding: 10px 15px;\n  }\n  input[type="submit"] {\n    all: unset;\n    color: #46a6ff;\n  }\n  > div {\n    gap: 20px;\n  }\n  #quit {\n    color: grey;\n  }\n  #valid {\n    color: ',";\n    font-size: small;\n    margin-bottom: 20px;\n  }\n"]);return j=function(){return n},n}var _=function(n){var e=n.setEditNick,t=n.onClickEditNick,r=(0,o._)((0,u.KO)(c.userInfoAtoms.userAtom),2),s=r[0],d=r[1],f=(0,o._)((0,l.useState)({userName:"",valid:!1,error:""}),2),m=f[0],h=f[1];return(0,i.jsx)(N,{className:"container",valid:m.valid,children:(0,i.jsxs)(k,{className:"col-container",children:[(0,i.jsx)("img",{src:"bread.png",width:"50px"}),(0,i.jsx)("span",{children:"닉네임 변경"}),(0,i.jsxs)(C,{valid:m.valid,className:"col-container",onSubmit:function(n){n.preventDefault();try{if(""==m.userName||!m.valid)throw Error("조건을 확인 해주세요.");a().patch("/user/userName/".concat(s.id,"/").concat(m.userName)).then(function(n){200==n.status&&d((0,g._)((0,v._)({},s),{userName:m.userName})),e(!1),h({userName:"",valid:!1,error:""})})}catch(n){n instanceof Error&&alert(n.message)}},children:[(0,i.jsx)("span",{id:"valid",children:m.error}),(0,i.jsx)("input",{type:"text",value:m.userName,onChange:function(n){/\s/g.test(n.target.value)?h({userName:n.target.value,valid:!1,error:"사용 불가"}):h({userName:n.target.value,valid:!0,error:"사용 가능"})},placeholder:s.userName+"(10자 이하, 공백불가)",maxLength:10}),(0,i.jsxs)("div",{className:"row-container",children:[(0,i.jsx)("input",{type:"submit",value:"수정"}),(0,i.jsx)("span",{onClick:t,id:"quit",children:"취소"})]})]})]})})},k=f.ZP.div.withConfig({componentId:"sc-1ab8ab07-0"})(b(),function(n){return n.theme.color.blue}),N=f.ZP.div.withConfig({componentId:"sc-1ab8ab07-1"})(w()),C=f.ZP.form.withConfig({componentId:"sc-1ab8ab07-2"})(j(),function(n){return n.valid?n.theme.color.blue:n.theme.color.red},function(n){return n.valid?n.theme.color.blue:n.theme.color.red});function y(){var n=(0,r._)(["\n  padding: 10px 15px;\n  gap: 10px;\n  border: solid thin ",";\n  position: absolute;\n  background-color: white;\n  margin-left: 60px;\n  margin-top: 30px;\n  border-radius: 5px;\n  font-size: medium;\n  font-weight: lighter;\n  font-size: x-small;\n  align-items: center;\n"]);return y=function(){return n},n}function A(){var n=(0,r._)(["\n  flex: 1;\n  justify-content: flex-end;\n  #bold {\n    font-weight: bold;\n    font-size: large;\n  }\n"]);return A=function(){return n},n}function z(){var n=(0,r._)(["\n  margin-left: 20px;\n  font-size: x-large;\n  align-items: center;\n  margin-bottom: 5px;\n  #text {\n    position: absolute;\n    right: 20px;\n    transform: translate(-100%);\n    color: white;\n    font-size: medium;\n  }\n"]);return z=function(){return n},n}function I(){var n=(0,r._)(["\n  align-items: center;\n  font-size: small;\n"]);return I=function(){return n},n}var E=function(n){var e=n.reviewArr,t=n.visitCnt,r=n.onClickHandler,s=(0,d.useRouter)(),f=(0,u.Dv)(c.userInfoAtoms.userAtom),m=(0,o._)((0,l.useState)(!1),2),v=m[0],g=m[1],b=l.useRef(null),w=function(n){var e;!b||(null===(e=b.current)||void 0===e?void 0:e.contains(n.target))?g(!0):g(!1)};(0,l.useEffect)(function(){return document.addEventListener("mousedown",w),function(){document.removeEventListener("mousedown",w)}});var j=(0,o._)((0,l.useState)(!1),2),k=j[0],N=j[1],C=function(){N(function(n){return!n}),g(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.h4,{className:"row-container",children:[(0,i.jsx)("span",{onClick:function(){g(!0)},children:f.userName}),v&&(0,i.jsxs)(S,{className:"col-container",ref:b,children:[(0,i.jsx)("span",{onClick:function(){a().post("/auth/logout").then(function(n){200==n.status&&(window.localStorage.removeItem("token"),s.push("/"))})},children:"로그아웃"}),(0,i.jsx)("span",{onClick:C,children:"닉네임 변경"})]}),(0,i.jsxs)(Z,{className:"row-container",children:[(0,i.jsxs)(F,{className:"col-container",id:"feed",onClick:r,children:[(0,i.jsx)("span",{id:"bold",children:e.length}),(0,i.jsx)("span",{children:"일지"})]}),(0,i.jsxs)(P,{className:"row-container",id:"visit",onClick:r,children:[(0,i.jsx)("span",{children:(0,i.jsx)(x.G,{icon:p.MV6,color:"#e2c26e"})}),(0,i.jsx)("span",{id:"text",children:t})]})]})]}),k&&(0,i.jsx)(_,{setEditNick:N,onClickEditNick:C})]})},S=f.ZP.div.withConfig({componentId:"sc-7dfaece8-0"})(y(),function(n){return n.theme.color.blue}),Z=f.ZP.div.withConfig({componentId:"sc-7dfaece8-1"})(A()),P=f.ZP.div.withConfig({componentId:"sc-7dfaece8-2"})(z()),F=f.ZP.div.withConfig({componentId:"sc-7dfaece8-3"})(I());function L(){var n=(0,r._)(["\n  font-size: medium;\n  padding: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  box-sizing: border-box;\n"]);return L=function(){return n},n}var G=function(){var n=(0,d.useRouter)(),e=(0,u.Dv)(c.userInfoAtoms.userAtom),t=(0,o._)((0,l.useState)([]),2),r=t[0],s=t[1],f=(0,o._)((0,l.useState)(!1),2),h=f[0],p=f[1],x=(0,o._)((0,l.useState)([]),2),v=x[0],g=x[1],b=(0,o._)((0,l.useState)([]),2),w=(b[0],b[1]);return(0,l.useEffect)(function(){e.id||n.push("/auth/login"),a().get("/user/feed/".concat(e.id)).then(function(n){s(n.data.Reviews),g(n.data.Visits.map(function(n){return n.StoreId}))})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E,{reviewArr:r,visitCnt:v.length,onClickHandler:function(n){"visit"==n.currentTarget.id?a().post("/store/list",v).then(function(n){w(n.data),p(!0)}):p(!1)}}),(0,i.jsx)(q,{children:h?"순례 리스트":"방문 일지"}),(0,i.jsx)(m.Z,{})]})},q=f.ZP.div.withConfig({componentId:"sc-9b95fbc9-0"})(L())},8350:function(n,e,t){"use strict";t.d(e,{ZX:function(){return u},h4:function(){return a}});var o=t(2805),r=t(5732);function i(){var n=(0,o._)(["\n    position: sticky;\n    display: flex;\n    align-items: center;\n    padding: 10px 20px;\n    top: 0px;\n    font-size: medium;\n    border-bottom: ",";\n    background-color: white;\n    color:#6f6f6f;\n    z-index:999;\n    gap: 10px;\n    box-sizing: border-box;\n    #visit{\n        flex: 0.1;\n    }\n"]);return i=function(){return n},n}function c(){var n=(0,o._)(["\n    flex: 0.7;\n"]);return c=function(){return n},n}function s(){var n=(0,o._)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-size: large;\n    margin-top: 10px;\n    color: #636363;\n        flex: 0.1;\n    #small{\n        font-size: xx-small;\n    }\n"]);return s=function(){return n},n}var a=r.ZP.header.withConfig({componentId:"sc-190f3b1a-0"})(i(),function(n){return"solid thin"+n.theme.color.border_grey}),u=r.ZP.span.withConfig({componentId:"sc-190f3b1a-1"})(c());r.ZP.div.withConfig({componentId:"sc-190f3b1a-2"})(s())},8083:function(n,e,t){"use strict";var o=t(8344),r=t(2805),i=t(9268),c=t(9),s=t(3380),a=t(9791),u=t(4835),d=t(5846),l=t.n(d),f=t(6008),m=t(6006),h=t(5732);function p(){var n=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  #icon {\n    font-size: large;\n    margin-bottom: 5px;\n  }\n  span {\n    font-size: xx-small;\n    margin-top: 5px;\n  }\n"]);return p=function(){return n},n}function x(){var n=(0,r._)(["\n  position: fixed;\n  bottom: 0;\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  gap: 20%;\n  align-items: center;\n  justify-content: center;\n  padding: 10px 0;\n  border-top: ",";\n  background-color: white;\n  z-index: 100;\n"]);return x=function(){return n},n}e.Z=function(){var n=(0,f.usePathname)(),e=(0,o._)((0,m.useState)(!0),2),t=e[0],r=e[1],d=(0,m.useRef)(0);(0,m.useEffect)(function(){return window.addEventListener("touchmove",l),function(){window.removeEventListener("touchmove",l)}},[]);var l=(0,m.useMemo)(function(){return(0,u.throttle)(function(n){var e=n.touches[0].screenY;d.current>e?r(!1):r(!0),d.current=e},250)},[d]);return(0,i.jsxs)(g,{className:(0,a.Z)(t?"visible":"invisible"),children:[(0,i.jsxs)(v,{href:"/home",children:[(0,i.jsx)(s.G,{icon:c.MV6,id:"icon",color:"/"==n?"#e2c26e":"#6f6f6f"}),(0,i.jsx)("span",{children:"홈"})]}),(0,i.jsxs)(v,{href:"/map",children:[(0,i.jsx)(s.G,{id:"icon",icon:c.FGq,color:"/storemap"==n?"#46A6FF":"#6f6f6f"}),(0,i.jsx)("span",{children:"빵 지도"})]}),(0,i.jsxs)(v,{href:"/wish",children:[(0,i.jsx)(s.G,{id:"icon",icon:c.m6i,color:"/wish"==n?"#f89573":"#6f6f6f"}),(0,i.jsx)("span",{children:"관심"})]}),(0,i.jsxs)(v,{href:"/feed",children:[(0,i.jsx)(s.G,{id:"icon",icon:c.FL8,color:"/feed"==n?"#46A6FF":"#6f6f6f"}),(0,i.jsx)("span",{children:"일지"})]})]})};var v=(0,h.ZP)(l()).withConfig({componentId:"sc-dd9f45bc-0"})(p()),g=h.ZP.div.withConfig({componentId:"sc-dd9f45bc-1"})(x(),function(n){return"solid thin"+n.theme.color.border_grey})}},function(n){n.O(0,[957,180,731,246,253,769,744],function(){return n(n.s=2281)}),_N_E=n.O()}]);