(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{1203:function(t,e,n){Promise.resolve().then(n.bind(n,5814))},2091:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g},userInfoAtoms:function(){return v}});var i=n(9268),s=n(6312),o=n(8344),r=n(8466),a=n(9677),u=n(8741),c=n.n(u),l=n(884),h=n(7431),d=n(6006),f=function(){var t=(0,o._)((0,d.useState)(null),2),e=t[0],n=t[1],i=(0,l.b9)(v.userAtom);(0,l.Dv)(v.userAtom);var u=(0,h.oC)(v.userAtom);(0,a.a)(["getAuth"],{queryFn:(0,s._)(function(){return(0,r.Jh)(this,function(t){switch(t.label){case 0:return[4,c().get("/api/auth",{headers:{Authorization:"".concat(e)}})];case 1:return[2,t.sent()]}})}),onSuccess:function(t){i(t.data.user)},onError:function(t){u(),window.localStorage.removeItem("token")},enabled:!!e,retry:!1}),(0,d.useEffect)(function(){var t,e=null===(t=JSON.parse((null==window?void 0:window.localStorage.getItem("token"))||"null"))||void 0===t?void 0:t.access_token;e&&(n(e),c().defaults.headers.common.Authorization="".concat(e))},[])},m=function(){var t=(0,l.b9)(v.locationAtom),e=(0,o._)((0,d.useState)(void 0),2),n=e[0],i=e[1];(0,a.a)(["getLocation"],{queryFn:(0,s._)(function(){return(0,r.Jh)(this,function(t){switch(t.label){case 0:return[4,c().get("https://dapi.kakao.com/v2/local/geo/coord2address.json",{headers:{Authorization:"KakaoAK ".concat("c752b603e559baec62bada612899f613")},params:{y:null==n?void 0:n.coords.latitude,x:null==n?void 0:n.coords.longitude}})];case 1:return[2,t.sent()]}})}),onSuccess:function(e){t({si:e.data.documents[0].address.region_1depth_name,y:(null==n?void 0:n.coords.latitude)||0,x:(null==n?void 0:n.coords.longitude)||0})},onError:function(t){},enabled:void 0!==n}),(0,d.useEffect)(function(){navigator.geolocation.getCurrentPosition(i)},[])},p=n(8115),v={userAtom:(0,n(9541).rw)({id:0,email:null,userName:""}),locationAtom:(0,p.cn)({si:"서울",y:37.556428224476505,x:126.97150576481177})};function g(t){return f(),m(),(0,i.jsx)(i.Fragment,{children:t.children})}},5814:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return O}});var i=n(2805),s=n(9268),o=n(6312),r=n(8466),a=n(2091),u=n(2939),c=n(8741),l=n.n(c),h=n(884),d=n(7431),f=n(6008),m=n(6006),p=function(){var t,e,n=(0,f.useRouter)(),i=(0,f.useSearchParams)(),s=null==i?void 0:i.get("code"),c=(0,h.b9)(a.userInfoAtoms.userAtom),p=(0,d.oC)(a.userInfoAtoms.userAtom),v=(0,u.D)({mutationFn:(t=(0,o._)(function(t){var e,n;return(0,r.Jh)(this,function(i){switch(i.label){case 0:return n=Object.keys(e={grant_type:"authorization_code",client_id:"c752b603e559baec62bada612899f613",redirect_uri:"http://localhost:3000/auth/login",code:t}).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&"),[4,l().post("https://kauth.kakao.com/oauth/token",n,{headers:{"Content-type":"application/x-www-form-urlencoded;charset=utf-8"}})];case 1:return[2,i.sent()]}})}),function(e){return t.apply(this,arguments)}),onSuccess:function(t){g.mutate(t.data.access_token)},retry:!1}),g=(0,u.D)({mutationFn:(e=(0,o._)(function(t){return(0,r.Jh)(this,function(e){switch(e.label){case 0:return[4,l().put("/api/auth/kakao",{access_token:t})];case 1:return[2,e.sent()]}})}),function(t){return e.apply(this,arguments)}),onSuccess:function(t){var e=t.data,i=e.jwt,s=e.user;201==t.status||200==t.status?(c(s),window.localStorage.setItem("token",JSON.stringify({access_token:i})),l().defaults.headers.common.Authorization="".concat(i),n.push("/home")):(window.alert("로그인에 실패하였습니다."),p())}});return(0,m.useEffect)(function(){s&&v.mutate(s)},[s]),{isLoading:v.isLoading||g.isLoading}},v=n(8083),g=n(9),b=n(3380),x=n(9791),y=n(6394),w=n.n(y),j=n(5846),C=n.n(j),k=n(5732);function _(){var t=(0,i._)(["\n  margin-top: 50px;\n  span:nth-child(4) {\n    font-size: small;\n    margin: 50px;\n  }\n"]);return _=function(){return t},t}function R(){var t=(0,i._)(["\n  align-items: flex-start;\n  font-weight: lighter;\n  margin: 30px;\n"]);return R=function(){return t},t}function S(){var t=(0,i._)(["\n  font-weight: lighter;\n  font-size: large;\n"]);return S=function(){return t},t}function M(){var t=(0,i._)(["\n  margin: 5px 0;\n  display: flex;\n\n  #icon {\n    margin-right: 10px;\n    margin-bottom: 10px;\n    font-size: large;\n  }\n"]);return M=function(){return t},t}var O=function(){var t=p().isLoading;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(E,{className:"col-container items-center py-8",children:[(0,s.jsx)(F,{children:"로그인으로, 더 많은 서비스를 이용할 수 있어요!"}),(0,s.jsxs)(A,{className:"col-container",children:[(0,s.jsxs)(P,{children:[(0,s.jsx)(b.G,{icon:g.MV6,color:"#e2c26e",id:"icon"})," ","빵지순례 방문 기록"]}),(0,s.jsxs)(P,{children:[(0,s.jsx)(b.G,{icon:g.FL8,color:"#7e7e7e",id:"icon"})," 빵지순례 방문 일지"]}),(0,s.jsxs)(P,{children:[(0,s.jsx)(b.G,{icon:g.m6i,color:"#f89573",id:"icon"})," 관심 빵집 등록"]})]}),(0,s.jsx)(w(),{src:"/assets/logo.png",width:"200",height:"100",alt:"logo"}),(0,s.jsx)("span",{children:"간편로그인으로 3초만에 로그인"}),(0,s.jsxs)(C(),{className:(0,x.Z)("relative",t&&"pointer-events-none"),href:"https://kauth.kakao.com/oauth/authorize?client_id=".concat("c752b603e559baec62bada612899f613","&redirect_uri=http://localhost:3000/auth/login&response_type=code"),children:[(0,s.jsx)(w(),{src:"/assets/kakao_login.png",id:"kakao-login-btn",width:"250",height:"100",alt:"kakao"}),t&&(0,s.jsx)("div",{className:"absolute w-full h-full bg-[#FEE500] top-0 flex items-center justify-center rounded-lg",children:(0,s.jsxs)("div",{className:"flex justify-center gap-1",children:[(0,s.jsx)("div",{className:"h-1 w-1 animate-zoomIn rounded-full bg-gray-400 animate-infinite"}),(0,s.jsx)("div",{className:"h-1 w-1 animate-zoomIn rounded-full bg-gray-400 animate-infinite animate-delay-150"}),(0,s.jsx)("div",{className:"h-1 w-1 animate-zoomIn rounded-full bg-gray-400 animate-infinite animate-delay-300"})]})})]})]}),(0,s.jsx)(v.Z,{})]})},E=k.ZP.div.withConfig({componentId:"sc-ecfcecfd-0"})(_()),A=k.ZP.div.withConfig({componentId:"sc-ecfcecfd-1"})(R()),F=k.ZP.span.withConfig({componentId:"sc-ecfcecfd-2"})(S()),P=k.ZP.span.withConfig({componentId:"sc-ecfcecfd-3"})(M())},8083:function(t,e,n){"use strict";var i=n(8344),s=n(2805),o=n(9268),r=n(9),a=n(3380),u=n(9791),c=n(4835),l=n(5846),h=n.n(l),d=n(6008),f=n(6006),m=n(5732);function p(){var t=(0,s._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  #icon {\n    font-size: large;\n    margin-bottom: 5px;\n  }\n  span {\n    font-size: xx-small;\n    margin-top: 5px;\n  }\n"]);return p=function(){return t},t}function v(){var t=(0,s._)(["\n  position: fixed;\n  bottom: 0;\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  gap: 20%;\n  align-items: center;\n  justify-content: center;\n  padding: 10px 0;\n  border-top: ",";\n  background-color: white;\n  z-index: 100;\n"]);return v=function(){return t},t}e.Z=function(){var t=(0,d.usePathname)(),e=(0,i._)((0,f.useState)(!0),2),n=e[0],s=e[1],l=(0,f.useRef)(0);(0,f.useEffect)(function(){return window.addEventListener("touchmove",h),function(){window.removeEventListener("touchmove",h)}},[]);var h=(0,f.useMemo)(function(){return(0,c.throttle)(function(t){var e=t.touches[0].screenY;l.current>e?s(!1):s(!0),l.current=e},250)},[l]);return(0,o.jsxs)(b,{className:(0,u.Z)(n?"visible":"invisible"),children:[(0,o.jsxs)(g,{href:"/home",children:[(0,o.jsx)(a.G,{icon:r.MV6,id:"icon",color:"/"==t?"#e2c26e":"#6f6f6f"}),(0,o.jsx)("span",{children:"홈"})]}),(0,o.jsxs)(g,{href:"/map",children:[(0,o.jsx)(a.G,{id:"icon",icon:r.FGq,color:"/storemap"==t?"#46A6FF":"#6f6f6f"}),(0,o.jsx)("span",{children:"빵 지도"})]}),(0,o.jsxs)(g,{href:"/wish",children:[(0,o.jsx)(a.G,{id:"icon",icon:r.m6i,color:"/wish"==t?"#f89573":"#6f6f6f"}),(0,o.jsx)("span",{children:"관심"})]}),(0,o.jsxs)(g,{href:"/feed",children:[(0,o.jsx)(a.G,{id:"icon",icon:r.FL8,color:"/feed"==t?"#46A6FF":"#6f6f6f"}),(0,o.jsx)("span",{children:"일지"})]})]})};var g=(0,m.ZP)(h()).withConfig({componentId:"sc-dd9f45bc-0"})(p()),b=m.ZP.div.withConfig({componentId:"sc-dd9f45bc-1"})(v(),function(t){return"solid thin"+t.theme.color.border_grey})},6394:function(t,e,n){t.exports=n(5962)},1728:function(t,e,n){"use strict";n.d(e,{_:function(){return i}});let i=console},6053:function(t,e,n){"use strict";n.d(e,{R:function(){return u},m:function(){return a}});var i=n(1728),s=n(3848),o=n(8511),r=n(760);class a extends o.F{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||i._,this.observers=[],this.state=t.state||u(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(e=>e!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,e;return null!=(t=null==(e=this.retryer)?void 0:e.continue())?t:this.execute()}async execute(){var t,e,n,i,s,o,a,u,c,l,h,d,f,m,p,v,g,b,x,y;let w="loading"===this.state.status;try{if(!w){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(c=(l=this.mutationCache.config).onMutate)?void 0:c.call(l,this.state.variables,this));let t=await (null==(h=(d=this.options).onMutate)?void 0:h.call(d,this.state.variables));t!==this.state.context&&this.dispatch({type:"loading",context:t,variables:this.state.variables})}let f=await (()=>{var t;return this.retryer=(0,r.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise})();return await (null==(t=(e=this.mutationCache.config).onSuccess)?void 0:t.call(e,f,this.state.variables,this.state.context,this)),await (null==(n=(i=this.options).onSuccess)?void 0:n.call(i,f,this.state.variables,this.state.context)),await (null==(s=(o=this.mutationCache.config).onSettled)?void 0:s.call(o,f,null,this.state.variables,this.state.context,this)),await (null==(a=(u=this.options).onSettled)?void 0:a.call(u,f,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:f}),f}catch(t){try{throw await (null==(f=(m=this.mutationCache.config).onError)?void 0:f.call(m,t,this.state.variables,this.state.context,this)),await (null==(p=(v=this.options).onError)?void 0:p.call(v,t,this.state.variables,this.state.context)),await (null==(g=(b=this.mutationCache.config).onSettled)?void 0:g.call(b,void 0,t,this.state.variables,this.state.context,this)),await (null==(x=(y=this.options).onSettled)?void 0:x.call(y,void 0,t,this.state.variables,this.state.context)),t}finally{this.dispatch({type:"error",error:t})}}}dispatch(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"loading":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,r.Kw)(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...e,...t.state}}})(this.state),s.V.batch(()=>{this.observers.forEach(e=>{e.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function u(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},8511:function(t,e,n){"use strict";n.d(e,{F:function(){return s}});var i=n(7179);class s{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,i.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,null!=t?t:i.sk?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},2939:function(t,e,n){"use strict";n.d(e,{D:function(){return d}});var i=n(6006),s=n(9851),o=n(7179),r=n(6053),a=n(3848),u=n(2772);class c extends u.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let n=this.options;this.options=this.client.defaultMutationOptions(t),(0,o.VS)(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,r.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,n,i,s,o,r,a,u;t.onSuccess?(null==(e=(n=this.mutateOptions).onSuccess)||e.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(i=(s=this.mutateOptions).onSettled)||i.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(o=(r=this.mutateOptions).onError)||o.call(r,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(u=this.mutateOptions).onSettled)||a.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(({listener:t})=>{t(this.currentResult)})})}}var l=n(5194),h=n(7889);function d(t,e,n){let r=(0,o.lV)(t,e,n),u=(0,l.NL)({context:r.context}),[d]=i.useState(()=>new c(u,r));i.useEffect(()=>{d.setOptions(r)},[d,r]);let m=(0,s.$)(i.useCallback(t=>d.subscribe(a.V.batchCalls(t)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),p=i.useCallback((t,e)=>{d.mutate(t,e).catch(f)},[d]);if(m.error&&(0,h.L)(d.options.useErrorBoundary,[m.error]))throw m.error;return{...m,mutate:p,mutateAsync:m.mutate}}function f(){}}},function(t){t.O(0,[957,180,731,246,962,253,769,744],function(){return t(t.s=1203)}),_N_E=t.O()}]);